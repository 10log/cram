{"version":3,"file":"air-attenuation-CBIk1QMo.mjs","sources":["../src/compute/acoustics/air-attenuation.ts"],"sourcesContent":["/**\n * \n * @param {number[]} frequency  frequency in Hz\n * @param {number} temperature temperature in °C (20°C)\n * @param {number} humidity relative humidity in % (40%)\n * @param {number} pressure atmospheric pressure in Pa (101325 Pa)\n * @returns {number[]} db per m attenuation\n * @see http://en.wikibooks.org/wiki/Engineering_Acoustics/Outdoor_Sound_Propagation\n */\nexport function airAttenuation(\n  frequency: number[],\n  temperature: number = 20,\n  humidity: number = 40,\n  pressure: number = 101325\n): number[] {\n  const T = temperature + 273.15;\n  const T0 = 293.15;\n  const T01 = 273.16;\n\n  const ps0 = 1.01325e5;\n  const ps: number = pressure || ps0;\n\n  const Csat = -6.8346 * Math.pow(T01 / T, 1.261) + 4.6151;\n  const rhosat = Math.pow(10, Csat);\n  const H = (rhosat * humidity * ps0) / ps;\n\n  const frn = (ps / ps0) * Math.pow(T0 / T, 0.5) * (9 + 280 * H * Math.exp(-4.17 * (Math.pow(T0 / T, 1 / 3) - 1)));\n  const fro = (ps / ps0) * (24.0 + (4.04e4 * H * (0.02 + H)) / (0.391 + H));\n\n  const alphas: number[] = [];\n  frequency.forEach(f => {\n    const alpha = f ** 2 * (1.84e-11 / ((Math.pow(T0 / T, 0.5) * ps) / ps0) + Math.pow(T0 / T, -2.5) * ((0.1068 * Math.exp(-3352 / T) * frn) / (f * f + frn * frn) + (0.01278 * Math.exp(-2239.1 / T) * fro) / (f * f + fro * fro)));\n    alphas.push((20 * alpha) / Math.log(10));\n  });\n\n  return alphas;\n}\n"],"names":["airAttenuation","frequency","temperature","humidity","pressure","T","T0","T01","ps0","ps","Csat","H","frn","fro","alphas","f","alpha"],"mappings":"AASO,SAASA,EACdC,GACAC,IAAsB,IACtBC,IAAmB,IACnBC,IAAmB,QACT;AACV,QAAMC,IAAIH,IAAc,QAClBI,IAAK,QACLC,IAAM,QAENC,IAAM,QACNC,IAAaL,KAAYI,GAEzBE,IAAO,UAAU,KAAK,IAAIH,IAAMF,GAAG,KAAK,IAAI,QAE5CM,IADS,KAAK,IAAI,IAAID,CAAI,IACZP,IAAWK,IAAOC,GAEhCG,IAAOH,IAAKD,IAAO,KAAK,IAAIF,IAAKD,GAAG,GAAG,KAAK,IAAI,MAAMM,IAAI,KAAK,IAAI,SAAS,KAAK,IAAIL,IAAKD,GAAG,IAAI,CAAC,IAAI,EAAE,IACxGQ,IAAOJ,IAAKD,KAAQ,KAAQ,QAASG,KAAK,OAAOA,MAAO,QAAQA,KAEhEG,IAAmB,CAAA;AACzB,SAAAb,EAAU,QAAQ,CAAAc,MAAK;AACrB,UAAMC,IAAQD,KAAK,KAAK,WAAa,KAAK,IAAIT,IAAKD,GAAG,GAAG,IAAII,IAAMD,KAAO,KAAK,IAAIF,IAAKD,GAAG,IAAI,KAAM,SAAS,KAAK,IAAI,QAAQA,CAAC,IAAIO,KAAQG,IAAIA,IAAIH,IAAMA,KAAQ,UAAU,KAAK,IAAI,UAAUP,CAAC,IAAIQ,KAAQE,IAAIA,IAAIF,IAAMA;AAC1N,IAAAC,EAAO,KAAM,KAAKE,IAAS,KAAK,IAAI,EAAE,CAAC;AAAA,EACzC,CAAC,GAEMF;AACT;"}