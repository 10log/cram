{"version":3,"file":"events-C-i7VNj9.mjs","sources":["../src/compute/2d-fdtd/events.ts"],"sourcesContent":["import { on } from \"../../messenger\";\r\nimport { setSolverProperty, removeSolver, useSolver } from \"../../store\";\r\nimport type { FDTD_2D } from '../2d-fdtd/index';\r\n\r\ndeclare global {\r\n  interface EventTypes {\r\n    ADD_FDTD_2D: FDTD_2D | undefined,\r\n    REMOVE_FDTD_2D: string;\r\n    FDTD_2D_SET_PROPERTY: SetPropertyPayload<FDTD_2D>\r\n  }\r\n}\r\n\r\nexport default function registerFDTDEvents(){\r\n  on(\"FDTD_2D_SET_PROPERTY\", setSolverProperty);\r\n  on(\"REMOVE_FDTD_2D\", removeSolver);\r\n  on(\"ADD_FDTD_2D\", async (solver) => {\r\n    if (solver) {\r\n      useSolver.getState().set(draft => {\r\n        draft.solvers[solver.uuid] = solver;\r\n      });\r\n    } else {\r\n      // Create new FDTD_2D instance via dynamic import\r\n      const { FDTD_2D } = await import('../2d-fdtd/index');\r\n      const newSolver = new FDTD_2D();\r\n      useSolver.getState().set(draft => {\r\n        draft.solvers[newSolver.uuid] = newSolver;\r\n      });\r\n    }\r\n  });\r\n}\r\n"],"names":["registerFDTDEvents","on","setSolverProperty","removeSolver","solver","useSolver","draft","FDTD_2D","newSolver"],"mappings":";AAYA,SAAwBA,IAAoB;AAC1C,EAAAC,EAAG,wBAAwBC,CAAiB,GAC5CD,EAAG,kBAAkBE,CAAY,GACjCF,EAAG,eAAe,OAAOG,MAAW;AAClC,QAAIA;AACF,MAAAC,EAAU,SAAA,EAAW,IAAI,CAAAC,MAAS;AAChC,QAAAA,EAAM,QAAQF,EAAO,IAAI,IAAIA;AAAA,MAC/B,CAAC;AAAA,SACI;AAEL,YAAM,EAAE,SAAAG,EAAA,IAAY,MAAM,OAAO,sBAAkB,GAC7CC,IAAY,IAAID,EAAA;AACtB,MAAAF,EAAU,SAAA,EAAW,IAAI,CAAAC,MAAS;AAChC,QAAAA,EAAM,QAAQE,EAAU,IAAI,IAAIA;AAAA,MAClC,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;"}