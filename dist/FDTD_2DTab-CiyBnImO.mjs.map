{"version":3,"file":"FDTD_2DTab-CiyBnImO.mjs","sources":["../src/objects/receiver.ts","../src/components/parameter-config/FDTD_2DTab.tsx"],"sourcesContent":["import * as THREE from \"three\";\r\nimport Container, { ContainerProps, getContainersOfKind } from \"./container\";\r\nimport chroma from \"chroma-js\";\r\nimport { MATCAP_PORCELAIN_WHITE, MATCAP_UNDER_SHADOW } from \"./asset-store\";\r\nimport FileSaver from \"file-saver\";\r\nimport { EditorModes } from \"../constants/editor-modes\";\r\nimport { on } from \"../messenger\";\r\nimport { addContainer, removeContainer, setContainerProperty } from \"../store\";\r\nimport { renderer } from \"../render/renderer\";\r\n// import { vs, fs } from '../render/shaders/glow';\r\n\r\nexport interface ReceiverSaveObject {\r\n  name: string;\r\n  visible: boolean;\r\n  position: number[];\r\n  scale: number[];\r\n  rotation: [number, number, number] | number[];\r\n  uuid: string;\r\n  kind: string;\r\n  color: number;\r\n}\r\n\r\nexport interface ReceiverProps extends ContainerProps {}\r\n\r\nconst defaults = {\r\n  color: 0xdd6f6f,\r\n  selectedColor: 0x9fcbff\r\n};\r\n\r\nexport class Receiver extends Container {\r\n  mesh: THREE.Mesh;\r\n  selectedMaterial: THREE.MeshMatcapMaterial;\r\n  normalMaterial: THREE.MeshMatcapMaterial;\r\n  fdtdSamples: number[];\r\n  constructor(name?: string, _props?: ReceiverProps) {\r\n    super(name||\"new receiver\");\r\n    this.kind = \"receiver\";\r\n    this.fdtdSamples = [] as number[];\r\n\r\n    this.selectedMaterial = new THREE.MeshMatcapMaterial({\r\n      fog: false,\r\n      color: defaults.color,\r\n      matcap: MATCAP_UNDER_SHADOW,\r\n      name: \"receiver-selected-material\"\r\n    });\r\n\r\n    this.normalMaterial = new THREE.MeshMatcapMaterial({\r\n      fog: false,\r\n      color: defaults.color,\r\n      matcap: MATCAP_PORCELAIN_WHITE,\r\n      name: \"receiver-material\"\r\n    });\r\n    this.mesh = new THREE.Mesh(new THREE.SphereGeometry(0.1, 32, 16), this.normalMaterial);\r\n    this.mesh.userData[\"kind\"] = \"receiver\";\r\n    this.add(this.mesh);\r\n    this.select = () => {\r\n      if (!this.selected) {\r\n        this.selected = true;\r\n        let brighterColor = chroma((this.mesh.material as THREE.MeshMatcapMaterial).color.getHex())\r\n          .brighten(1)\r\n          .num();\r\n        this.selectedMaterial.color.setHex(brighterColor);\r\n        this.mesh.material = this.selectedMaterial;\r\n      }\r\n    };\r\n    this.deselect = () => {\r\n      if (this.selected) {\r\n        this.selected = false;\r\n        this.mesh.material = this.normalMaterial;\r\n      }\r\n    };\r\n    this.renderCallback = (_time?: number) => {};\r\n    renderer.add(this);\r\n  }\r\n  dispose(){\r\n    renderer.remove(this);\r\n  }\r\n  save() {\r\n    const name = this.name;\r\n    const visible = this.visible;\r\n    const position = this.position.toArray();\r\n    const scale = this.scale.toArray();\r\n    const rotation = this.rotation.toArray().slice(0, 3) as [number, number, number];\r\n    const color = this.getColorAsNumber();\r\n    const uuid = this.uuid;\r\n    const kind = this.kind;\r\n    return {\r\n      kind,\r\n      name,\r\n      visible,\r\n      position,\r\n      scale,\r\n      rotation,\r\n      color,\r\n      uuid\r\n    } as ReceiverSaveObject;\r\n  }\r\n  restore(state: ReceiverSaveObject) {\r\n    this.name = state.name;\r\n    this.visible = state.visible;\r\n    this.position.set(state.position[0], state.position[1], state.position[2]);\r\n    this.scale.set(state.scale[0], state.scale[1], state.scale[2]);\r\n    this.rotation.set(\r\n      Number(state.rotation[0]),\r\n      Number(state.rotation[1]),\r\n      Number(state.rotation[2])\r\n    );\r\n    this.color = state.color;\r\n    this.uuid = state.uuid;\r\n    return this;\r\n  }\r\n  clearSamples() {\r\n    this.fdtdSamples = [] as number[];\r\n  }\r\n  saveSamples() {\r\n    if (this.fdtdSamples.length > 0) {\r\n      const blob = new Blob([this.fdtdSamples.join(\"\\n\")], {\r\n        type: \"text/plain;charset=utf-8\"\r\n      });\r\n      FileSaver.saveAs(blob, `fdtdsamples-receiver-${this.name}.txt`);\r\n    } else return;\r\n  }\r\n\r\n  getColorAsNumber() {\r\n    return (this.mesh.material as THREE.MeshBasicMaterial).color.getHex();\r\n  }\r\n  getColorAsString() {\r\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\r\n  }\r\n  onModeChange(mode: EditorModes) {\r\n    switch (mode) {\r\n      case EditorModes.OBJECT:\r\n        break;\r\n      case EditorModes.SKETCH:\r\n        break;\r\n      case EditorModes.EDIT:\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  get color() {\r\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\r\n  }\r\n  set color(col: string | number) {\r\n    if (typeof col === \"string\") {\r\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setStyle(col);\r\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\r\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\r\n    } else {\r\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setHex(col);\r\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\r\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\r\n    }\r\n  }\r\n  get brief() {\r\n    return {\r\n      uuid: this.uuid,\r\n      name: this.name,\r\n      selected: this.selected,\r\n      kind: this.kind,\r\n      children: []\r\n    };\r\n  }\r\n}\r\n\r\n\r\n\r\n// this allows for nice type checking with 'on' and 'emit' from messenger\r\ndeclare global {\r\n  interface EventTypes {\r\n    ADD_RECEIVER: Receiver | undefined;\r\n    RECEIVER_SET_PROPERTY: SetPropertyPayload<Receiver>;\r\n    REMOVE_RECEIVER: string;\r\n  }\r\n}\r\n\r\non(\"ADD_RECEIVER\", addContainer(Receiver))\r\non(\"REMOVE_RECEIVER\", removeContainer);\r\non(\"RECEIVER_SET_PROPERTY\", setContainerProperty);\r\n\r\nexport const getReceivers = () => getContainersOfKind<Receiver>(\"receiver\");\r\n\r\n\r\nexport default Receiver;","// @ts-nocheck\r\nimport React, { useState } from \"react\";\r\nimport FDTD_2D from \"../../compute/2d-fdtd\";\r\nimport Slider, { SliderChangeEvent } from '../slider/Slider';\r\nimport PropertyRow from \"./property-row/PropertyRow\";\r\nimport PropertyRowLabel from \"./property-row/PropertyRowLabel\";\r\nimport PropertyRowButton from \"./property-row/PropertyRowButton\";\r\nimport PropertyRowCheckbox from \"./property-row/PropertyRowCheckbox\";\r\nimport PropertyRowFolder from \"./property-row/PropertyRowFolder\";\r\nimport { getSources } from \"../../objects/source\";\r\nimport { getReceivers } from \"../../objects/receiver\";\r\nimport { useSolver } from \"../../store\";\r\n\r\n\r\n\r\nexport const FDTD_2DTab = ({uuid}: {uuid: string}) => {\r\n  const sources = getSources();\r\n  const receivers = getReceivers();\r\n\r\n  const solver = useSolver(state=>state.solvers[uuid] as FDTD_2D)\r\n  \r\n  const [colorBrightness, setColorBrightness] = useState(solver.uniforms['colorBrightness'].value);\r\n  const [heightScale, setHeightScale] = useState(solver.mesh.scale.z);\r\n  const [damping, setDamping] = useState(solver.heightmapVariable.material[\"uniforms\"]['damping'].value);\r\n  const [numPasses, setNumPasses] = useState(solver.numPasses);\r\n  const [running, setRunning] = useState(solver.running);\r\n  const [recording, setRecording] = useState(solver.recording);\r\n  const [wireframeVisible, setWireframeVisible] = useState(solver.getWireframeVisible());\r\n  const [viewFolderOpen, setViewFolderOpen] = useState(false);\r\n  const [simParamFolderOpen, setSimParamFolderOpen] = useState(false);\r\n  const [sourcesFolderOpen, setSourcesFolderOpen] = useState(false);\r\n  const [FDTDsourceKeys, setFDTDSourcesKeys] = useState(solver.sourceKeys);\r\n  const notIncludedSources = sources.filter(src => !solver.sources[src.uuid]);\r\n\r\n  const [receiverFolderOpen, setReceiverFolderOpen] = useState(false);\r\n  const [FDTDreceiverKeys, setFDTDreceiverKeys] = useState(solver.receiverKeys);\r\n  const notIncludedReceiver = receivers.filter((rec) => !solver.receiverKeys[rec.uuid]);\r\n\r\n  return (\r\n    <div>\r\n      <PropertyRowFolder\r\n        id=\"view\"\r\n        label=\"View\"\r\n        open={viewFolderOpen}\r\n        onOpenClose={() => setViewFolderOpen(!viewFolderOpen)}\r\n      >\r\n        <Slider\r\n          id=\"colorBrightness\"\r\n          label=\"Color Brightness\"\r\n          labelPosition=\"left\"\r\n          tooltipText=\"Changes the color brightness\"\r\n          min={0}\r\n          max={40}\r\n          step={0.1}\r\n          value={colorBrightness}\r\n          hasToolTip={viewFolderOpen}\r\n          onChange={(e: SliderChangeEvent) => {\r\n            solver.uniforms[\"colorBrightness\"].value = e.value;\r\n            setColorBrightness(e.value);\r\n          }}\r\n        />\r\n        <Slider\r\n          id=\"heightScale\"\r\n          label=\"Height Scale\"\r\n          labelPosition=\"left\"\r\n          tooltipText=\"Height Scale\"\r\n          min={0}\r\n          max={1}\r\n          step={0.001}\r\n          hasToolTip={viewFolderOpen}\r\n          value={heightScale}\r\n          onChange={(e: SliderChangeEvent) => {\r\n            solver.mesh.scale.setZ(e.value === 0 ? 0.001 : e.value);\r\n            setHeightScale(e.value);\r\n          }}\r\n        />\r\n        <PropertyRow>\r\n          <PropertyRowLabel hasToolTip={viewFolderOpen} label=\"Wireframe\" tooltip=\"Display mesh as wirefame\" />\r\n          <PropertyRowCheckbox\r\n            onChange={(e) => {\r\n              solver.setWireframeVisible(e.value);\r\n              setWireframeVisible(e.value);\r\n            }}\r\n            value={wireframeVisible}\r\n          />\r\n        </PropertyRow>\r\n      </PropertyRowFolder>\r\n      <PropertyRowFolder\r\n        id=\"sim-params\"\r\n        label=\"Simulation Parameters\"\r\n        open={simParamFolderOpen}\r\n        onOpenClose={() => setSimParamFolderOpen(!simParamFolderOpen)}\r\n      >\r\n        <Slider\r\n          id=\"damping\"\r\n          label=\"Damping\"\r\n          labelPosition=\"left\"\r\n          tooltipText=\"Damping Coefficient\"\r\n          min={0.7}\r\n          max={1.0}\r\n          step={0.001}\r\n          hasToolTip={simParamFolderOpen}\r\n          value={damping}\r\n          onChange={(e: SliderChangeEvent) => {\r\n            solver.heightmapVariable.material[\"uniforms\"][\"damping\"].value = e.value;\r\n            setDamping(e.value);\r\n          }}\r\n        />\r\n        <Slider\r\n          id=\"numPasses\"\r\n          label=\"Passes\"\r\n          labelPosition=\"left\"\r\n          tooltipText=\"Number of passes per frame\"\r\n          min={1}\r\n          max={30}\r\n          step={1}\r\n          hasToolTip={simParamFolderOpen}\r\n          value={numPasses}\r\n          onChange={(e: SliderChangeEvent) => {\r\n            solver.numPasses = e.value;\r\n            setNumPasses(e.value);\r\n          }}\r\n        />\r\n      </PropertyRowFolder>\r\n\r\n      <PropertyRowFolder\r\n        id=\"sim-sources\"\r\n        label=\"Sources\"\r\n        open={sourcesFolderOpen}\r\n        onOpenClose={() => setSourcesFolderOpen(!sourcesFolderOpen)}\r\n      >\r\n        <PropertyRow>\r\n          <PropertyRowLabel hasToolTip={sourcesFolderOpen} label=\"Source\" tooltip=\"All available sources\" />\r\n          <select\r\n            value={0}\r\n            name=\"sources\"\r\n            onChange={(e) => {\r\n              console.log(e.currentTarget.value);\r\n              const source = sources.filter((x) => x.uuid === e.currentTarget.value);\r\n              source[0] && solver.addSource(source[0]);\r\n              setFDTDSourcesKeys(solver.sourceKeys);\r\n            }}\r\n          >\r\n            <option value={0}>Select Source</option>\r\n            {notIncludedSources.map((src) => {\r\n              return (\r\n                <option key={src.uuid} value={src.uuid}>\r\n                  {src.name}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </PropertyRow>\r\n        {FDTDsourceKeys.map((sourcekey) => {\r\n          return (\r\n            <PropertyRow key={sourcekey}>\r\n              <PropertyRowLabel\r\n                hasToolTip={false}\r\n                label={solver.sources[sourcekey] && solver.sources[sourcekey].name}\r\n              />\r\n              <PropertyRowButton\r\n                label=\"Remove\"\r\n                onClick={(_e) => {\r\n                  setFDTDSourcesKeys(solver.sourceKeys.filter((x) => x !== sourcekey));\r\n                  solver.removeSource(sourcekey);\r\n                }}\r\n              />\r\n            </PropertyRow>\r\n          );\r\n        })}\r\n      </PropertyRowFolder>\r\n      <PropertyRowFolder\r\n        id=\"sim-receivers\"\r\n        label=\"Receivers\"\r\n        open={receiverFolderOpen}\r\n        onOpenClose={() => setReceiverFolderOpen(!receiverFolderOpen)}\r\n      >\r\n        <PropertyRow>\r\n          <PropertyRowLabel hasToolTip={receiverFolderOpen} label=\"Receiver\" tooltip=\"All available receivers\" />\r\n          <select\r\n            value={0}\r\n            name=\"receivers\"\r\n            onChange={(e) => {\r\n              console.log(e.currentTarget.value);\r\n              const receiver = receivers.filter((x) => x.uuid === e.currentTarget.value);\r\n              receiver[0] && solver.addReceiver(receiver[0]);\r\n              setFDTDSourcesKeys(solver.receiverKeys);\r\n            }}\r\n          >\r\n            <option value={0}>Select Receiver</option>\r\n            {notIncludedReceiver.map((rec) => {\r\n              return (\r\n                <option key={rec.uuid} value={rec.uuid}>\r\n                  {rec.name}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </PropertyRow>\r\n        {FDTDreceiverKeys.map((receiverkey) => {\r\n          return (\r\n            <PropertyRow key={receiverkey}>\r\n              <PropertyRowLabel hasToolTip={false} label={solver.receivers[receiverkey].name} />\r\n              <PropertyRowButton\r\n                label=\"Remove\"\r\n                onClick={(_e) => {\r\n                  setFDTDreceiverKeys(solver.receiverKeys.filter((x) => x !== receiverkey));\r\n                  solver.removeReceiver(receiverkey);\r\n                }}\r\n              />\r\n            </PropertyRow>\r\n          );\r\n        })}\r\n      </PropertyRowFolder>\r\n      <PropertyRow>\r\n        <PropertyRowLabel label=\"Run/Pause\" tooltip=\"Runs or pauses the simulation\" />\r\n        <PropertyRowButton\r\n          onClick={(_e) => {\r\n            if (solver.running) {\r\n              solver.stop();\r\n              setRunning(false);\r\n            } else {\r\n              solver.run();\r\n              setRunning(true);\r\n            }\r\n          }}\r\n          label={running ? \"Pause\" : \"Run\"}\r\n        />\r\n      </PropertyRow>\r\n      <PropertyRow>\r\n        <PropertyRowLabel label=\"Recording\" tooltip=\"Starts/stops recording\" />\r\n        <PropertyRowButton\r\n          onClick={(_e) => {\r\n            if (solver.recording) {\r\n              solver.recording = false;\r\n              setRecording(false);\r\n            } else {\r\n              solver.recording = true;\r\n              setRecording(true);\r\n            }\r\n          }}\r\n          label={recording ? \"Stop\" : \"Record\"}\r\n        />\r\n      </PropertyRow>\r\n      <PropertyRow>\r\n        <PropertyRowLabel label=\"Clear\" tooltip=\"Clears the grid\" />\r\n        <PropertyRowButton onClick={solver.clear} label={\"Clear\"} />\r\n      </PropertyRow>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default FDTD_2DTab;"],"names":["defaults","Receiver","Container","name","_props","THREE","MATCAP_UNDER_SHADOW","MATCAP_PORCELAIN_WHITE","brighterColor","chroma","_time","renderer","visible","position","scale","rotation","color","uuid","state","blob","FileSaver","mode","EditorModes","col","on","addContainer","removeContainer","setContainerProperty","getReceivers","getContainersOfKind","FDTD_2DTab","sources","getSources","receivers","solver","useSolver","colorBrightness","setColorBrightness","useState","heightScale","setHeightScale","damping","setDamping","numPasses","setNumPasses","running","setRunning","recording","setRecording","wireframeVisible","setWireframeVisible","viewFolderOpen","setViewFolderOpen","simParamFolderOpen","setSimParamFolderOpen","sourcesFolderOpen","setSourcesFolderOpen","FDTDsourceKeys","setFDTDSourcesKeys","notIncludedSources","src","receiverFolderOpen","setReceiverFolderOpen","FDTDreceiverKeys","setFDTDreceiverKeys","notIncludedReceiver","rec","jsxs","PropertyRowFolder","jsx","Slider","PropertyRow","PropertyRowLabel","PropertyRowCheckbox","source","x","sourcekey","PropertyRowButton","_e","receiver","receiverkey"],"mappings":";;;;;AAwBA,MAAMA,IAAW;AAAA,EACf,OAAO;AAET;AAEO,MAAMC,WAAiBC,EAAU;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAYC,GAAeC,GAAwB;AACjD,UAAMD,KAAM,cAAc,GAC1B,KAAK,OAAO,YACZ,KAAK,cAAc,CAAA,GAEnB,KAAK,mBAAmB,IAAIE,EAAM,mBAAmB;AAAA,MACnD,KAAK;AAAA,MACL,OAAOL,EAAS;AAAA,MAChB,QAAQM;AAAA,MACR,MAAM;AAAA,IAAA,CACP,GAED,KAAK,iBAAiB,IAAID,EAAM,mBAAmB;AAAA,MACjD,KAAK;AAAA,MACL,OAAOL,EAAS;AAAA,MAChB,QAAQO;AAAA,MACR,MAAM;AAAA,IAAA,CACP,GACD,KAAK,OAAO,IAAIF,EAAM,KAAK,IAAIA,EAAM,eAAe,KAAK,IAAI,EAAE,GAAG,KAAK,cAAc,GACrF,KAAK,KAAK,SAAS,OAAU,YAC7B,KAAK,IAAI,KAAK,IAAI,GAClB,KAAK,SAAS,MAAM;AAClB,UAAI,CAAC,KAAK,UAAU;AAClB,aAAK,WAAW;AAChB,YAAIG,IAAgBC,GAAQ,KAAK,KAAK,SAAsC,MAAM,OAAA,CAAQ,EACvF,SAAS,CAAC,EACV,IAAA;AACH,aAAK,iBAAiB,MAAM,OAAOD,CAAa,GAChD,KAAK,KAAK,WAAW,KAAK;AAAA,MAC5B;AAAA,IACF,GACA,KAAK,WAAW,MAAM;AACpB,MAAI,KAAK,aACP,KAAK,WAAW,IAChB,KAAK,KAAK,WAAW,KAAK;AAAA,IAE9B,GACA,KAAK,iBAAiB,CAACE,MAAmB;AAAA,IAAC,GAC3CC,EAAS,IAAI,IAAI;AAAA,EACnB;AAAA,EACA,UAAS;AACP,IAAAA,EAAS,OAAO,IAAI;AAAA,EACtB;AAAA,EACA,OAAO;AACL,UAAMR,IAAO,KAAK,MACZS,IAAU,KAAK,SACfC,IAAW,KAAK,SAAS,QAAA,GACzBC,IAAQ,KAAK,MAAM,QAAA,GACnBC,IAAW,KAAK,SAAS,UAAU,MAAM,GAAG,CAAC,GAC7CC,IAAQ,KAAK,iBAAA,GACbC,IAAO,KAAK;AAElB,WAAO;AAAA,MACL,MAFW,KAAK;AAAA,MAGhB,MAAAd;AAAA,MACA,SAAAS;AAAA,MACA,UAAAC;AAAA,MACA,OAAAC;AAAA,MACA,UAAAC;AAAA,MACA,OAAAC;AAAA,MACA,MAAAC;AAAA,IAAA;AAAA,EAEJ;AAAA,EACA,QAAQC,GAA2B;AACjC,gBAAK,OAAOA,EAAM,MAClB,KAAK,UAAUA,EAAM,SACrB,KAAK,SAAS,IAAIA,EAAM,SAAS,CAAC,GAAGA,EAAM,SAAS,CAAC,GAAGA,EAAM,SAAS,CAAC,CAAC,GACzE,KAAK,MAAM,IAAIA,EAAM,MAAM,CAAC,GAAGA,EAAM,MAAM,CAAC,GAAGA,EAAM,MAAM,CAAC,CAAC,GAC7D,KAAK,SAAS;AAAA,MACZ,OAAOA,EAAM,SAAS,CAAC,CAAC;AAAA,MACxB,OAAOA,EAAM,SAAS,CAAC,CAAC;AAAA,MACxB,OAAOA,EAAM,SAAS,CAAC,CAAC;AAAA,IAAA,GAE1B,KAAK,QAAQA,EAAM,OACnB,KAAK,OAAOA,EAAM,MACX;AAAA,EACT;AAAA,EACA,eAAe;AACb,SAAK,cAAc,CAAA;AAAA,EACrB;AAAA,EACA,cAAc;AACZ,QAAI,KAAK,YAAY,SAAS,GAAG;AAC/B,YAAMC,IAAO,IAAI,KAAK,CAAC,KAAK,YAAY,KAAK;AAAA,CAAI,CAAC,GAAG;AAAA,QACnD,MAAM;AAAA,MAAA,CACP;AACDC,MAAAA,GAAU,OAAOD,GAAM,wBAAwB,KAAK,IAAI,MAAM;AAAA,IAChE,MAAO;AAAA,EACT;AAAA,EAEA,mBAAmB;AACjB,WAAQ,KAAK,KAAK,SAAqC,MAAM,OAAA;AAAA,EAC/D;AAAA,EACA,mBAAmB;AACjB,WAAO,MAA2B,KAAK,KAAK,SAAqC,MAAM,aAAA;AAAA,EACzF;AAAA,EACA,aAAaE,GAAmB;AAC9B,YAAQA,GAAA;AAAA,MACN,KAAKC,EAAY;AACf;AAAA,MACF,KAAKA,EAAY;AACf;AAAA,MACF,KAAKA,EAAY;AACf;AAAA,IAEA;AAAA,EAEN;AAAA,EACA,IAAI,QAAQ;AACV,WAAO,MAA2B,KAAK,KAAK,SAAqC,MAAM,aAAA;AAAA,EACzF;AAAA,EACA,IAAI,MAAMC,GAAsB;AAC9B,IAAI,OAAOA,KAAQ,YAChB,KAAK,KAAK,SAAsC,MAAM,SAASA,CAAG,GAClE,KAAK,eAA4C,MAAM,SAASA,CAAG,GACnE,KAAK,iBAA8C,MAAM,SAASA,CAAG,MAErE,KAAK,KAAK,SAAsC,MAAM,OAAOA,CAAG,GAChE,KAAK,eAA4C,MAAM,OAAOA,CAAG,GACjE,KAAK,iBAA8C,MAAM,OAAOA,CAAG;AAAA,EAExE;AAAA,EACA,IAAI,QAAQ;AACV,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK;AAAA,MACX,UAAU,KAAK;AAAA,MACf,MAAM,KAAK;AAAA,MACX,UAAU,CAAA;AAAA,IAAC;AAAA,EAEf;AACF;AAaAC,EAAG,gBAAgBC,EAAaxB,EAAQ,CAAC;AACzCuB,EAAG,mBAAmBE,CAAe;AACrCF,EAAG,yBAAyBG,CAAoB;AAEzC,MAAMC,KAAe,MAAMC,EAA8B,UAAU,GCtK7DC,KAAa,CAAC,EAAC,MAAAb,QAA0B;AACpD,QAAMc,IAAUC,GAAA,GACVC,IAAYL,GAAA,GAEZM,IAASC,GAAU,CAAAjB,MAAOA,EAAM,QAAQD,CAAI,CAAY,GAExD,CAACmB,GAAiBC,CAAkB,IAAIC,EAASJ,EAAO,SAAS,gBAAmB,KAAK,GACzF,CAACK,GAAaC,CAAc,IAAIF,EAASJ,EAAO,KAAK,MAAM,CAAC,GAC5D,CAACO,GAASC,CAAU,IAAIJ,EAASJ,EAAO,kBAAkB,SAAS,SAAY,QAAW,KAAK,GAC/F,CAACS,GAAWC,CAAY,IAAIN,EAASJ,EAAO,SAAS,GACrD,CAACW,GAASC,CAAU,IAAIR,EAASJ,EAAO,OAAO,GAC/C,CAACa,GAAWC,CAAY,IAAIV,EAASJ,EAAO,SAAS,GACrD,CAACe,GAAkBC,CAAmB,IAAIZ,EAASJ,EAAO,qBAAqB,GAC/E,CAACiB,GAAgBC,CAAiB,IAAId,EAAS,EAAK,GACpD,CAACe,GAAoBC,CAAqB,IAAIhB,EAAS,EAAK,GAC5D,CAACiB,GAAmBC,CAAoB,IAAIlB,EAAS,EAAK,GAC1D,CAACmB,GAAgBC,CAAkB,IAAIpB,EAASJ,EAAO,UAAU,GACjEyB,IAAqB5B,EAAQ,OAAO,CAAA6B,MAAO,CAAC1B,EAAO,QAAQ0B,EAAI,IAAI,CAAC,GAEpE,CAACC,GAAoBC,CAAqB,IAAIxB,EAAS,EAAK,GAC5D,CAACyB,GAAkBC,CAAmB,IAAI1B,EAASJ,EAAO,YAAY,GACtE+B,IAAsBhC,EAAU,OAAO,CAACiC,MAAQ,CAAChC,EAAO,aAAagC,EAAI,IAAI,CAAC;AAEpF,2BACG,OAAA,EACC,UAAA;AAAA,IAAA,gBAAAC;AAAA,MAACC;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAM;AAAA,QACN,MAAMjB;AAAA,QACN,aAAa,MAAMC,EAAkB,CAACD,CAAc;AAAA,QAEpD,UAAA;AAAA,UAAA,gBAAAkB;AAAA,YAACC;AAAA,YAAA;AAAA,cACC,IAAG;AAAA,cACH,OAAM;AAAA,cACN,eAAc;AAAA,cACd,aAAY;AAAA,cACZ,KAAK;AAAA,cACL,KAAK;AAAA,cACL,MAAM;AAAA,cACN,OAAOlC;AAAA,cACP,YAAYe;AAAA,cACZ,UAAU,CAAC,MAAyB;AAClC,gBAAAjB,EAAO,SAAS,gBAAmB,QAAQ,EAAE,OAC7CG,EAAmB,EAAE,KAAK;AAAA,cAC5B;AAAA,YAAA;AAAA,UAAA;AAAA,UAEF,gBAAAgC;AAAA,YAACC;AAAA,YAAA;AAAA,cACC,IAAG;AAAA,cACH,OAAM;AAAA,cACN,eAAc;AAAA,cACd,aAAY;AAAA,cACZ,KAAK;AAAA,cACL,KAAK;AAAA,cACL,MAAM;AAAA,cACN,YAAYnB;AAAA,cACZ,OAAOZ;AAAA,cACP,UAAU,CAAC,MAAyB;AAClC,gBAAAL,EAAO,KAAK,MAAM,KAAK,EAAE,UAAU,IAAI,OAAQ,EAAE,KAAK,GACtDM,EAAe,EAAE,KAAK;AAAA,cACxB;AAAA,YAAA;AAAA,UAAA;AAAA,4BAED+B,GAAA,EACC,UAAA;AAAA,YAAA,gBAAAF,EAACG,KAAiB,YAAYrB,GAAgB,OAAM,aAAY,SAAQ,4BAA2B;AAAA,YACnG,gBAAAkB;AAAA,cAACI;AAAA,cAAA;AAAA,gBACC,UAAU,CAAC,MAAM;AACf,kBAAAvC,EAAO,oBAAoB,EAAE,KAAK,GAClCgB,EAAoB,EAAE,KAAK;AAAA,gBAC7B;AAAA,gBACA,OAAOD;AAAA,cAAA;AAAA,YAAA;AAAA,UACT,EAAA,CACF;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAEF,gBAAAkB;AAAA,MAACC;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAM;AAAA,QACN,MAAMf;AAAA,QACN,aAAa,MAAMC,EAAsB,CAACD,CAAkB;AAAA,QAE5D,UAAA;AAAA,UAAA,gBAAAgB;AAAA,YAACC;AAAA,YAAA;AAAA,cACC,IAAG;AAAA,cACH,OAAM;AAAA,cACN,eAAc;AAAA,cACd,aAAY;AAAA,cACZ,KAAK;AAAA,cACL,KAAK;AAAA,cACL,MAAM;AAAA,cACN,YAAYjB;AAAA,cACZ,OAAOZ;AAAA,cACP,UAAU,CAAC,MAAyB;AAClC,gBAAAP,EAAO,kBAAkB,SAAS,SAAY,QAAW,QAAQ,EAAE,OACnEQ,EAAW,EAAE,KAAK;AAAA,cACpB;AAAA,YAAA;AAAA,UAAA;AAAA,UAEF,gBAAA2B;AAAA,YAACC;AAAA,YAAA;AAAA,cACC,IAAG;AAAA,cACH,OAAM;AAAA,cACN,eAAc;AAAA,cACd,aAAY;AAAA,cACZ,KAAK;AAAA,cACL,KAAK;AAAA,cACL,MAAM;AAAA,cACN,YAAYjB;AAAA,cACZ,OAAOV;AAAA,cACP,UAAU,CAAC,MAAyB;AAClC,gBAAAT,EAAO,YAAY,EAAE,OACrBU,EAAa,EAAE,KAAK;AAAA,cACtB;AAAA,YAAA;AAAA,UAAA;AAAA,QACF;AAAA,MAAA;AAAA,IAAA;AAAA,IAGF,gBAAAuB;AAAA,MAACC;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAM;AAAA,QACN,MAAMb;AAAA,QACN,aAAa,MAAMC,EAAqB,CAACD,CAAiB;AAAA,QAE1D,UAAA;AAAA,UAAA,gBAAAY,EAACI,GAAA,EACC,UAAA;AAAA,YAAA,gBAAAF,EAACG,KAAiB,YAAYjB,GAAmB,OAAM,UAAS,SAAQ,yBAAwB;AAAA,YAChG,gBAAAY;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,gBACP,MAAK;AAAA,gBACL,UAAU,CAAC,MAAM;AACf,0BAAQ,IAAI,EAAE,cAAc,KAAK;AACjC,wBAAMO,IAAS3C,EAAQ,OAAO,CAAC4C,MAAMA,EAAE,SAAS,EAAE,cAAc,KAAK;AACrE,kBAAAD,EAAO,CAAC,KAAKxC,EAAO,UAAUwC,EAAO,CAAC,CAAC,GACvChB,EAAmBxB,EAAO,UAAU;AAAA,gBACtC;AAAA,gBAEA,UAAA;AAAA,kBAAA,gBAAAmC,EAAC,UAAA,EAAO,OAAO,GAAG,UAAA,iBAAa;AAAA,kBAC9BV,EAAmB,IAAI,CAACC,MAErB,gBAAAS,EAAC,YAAsB,OAAOT,EAAI,MAC/B,UAAAA,EAAI,QADMA,EAAI,IAEjB,CAEH;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,UACH,GACF;AAAA,UACCH,EAAe,IAAI,CAACmB,wBAEhBL,GAAA,EACC,UAAA;AAAA,YAAA,gBAAAF;AAAA,cAACG;AAAA,cAAA;AAAA,gBACC,YAAY;AAAA,gBACZ,OAAOtC,EAAO,QAAQ0C,CAAS,KAAK1C,EAAO,QAAQ0C,CAAS,EAAE;AAAA,cAAA;AAAA,YAAA;AAAA,YAEhE,gBAAAP;AAAA,cAACQ;AAAA,cAAA;AAAA,gBACC,OAAM;AAAA,gBACN,SAAS,CAACC,MAAO;AACf,kBAAApB,EAAmBxB,EAAO,WAAW,OAAO,CAACyC,MAAMA,MAAMC,CAAS,CAAC,GACnE1C,EAAO,aAAa0C,CAAS;AAAA,gBAC/B;AAAA,cAAA;AAAA,YAAA;AAAA,UACF,EAAA,GAXgBA,CAYlB,CAEH;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAEH,gBAAAT;AAAA,MAACC;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAM;AAAA,QACN,MAAMP;AAAA,QACN,aAAa,MAAMC,EAAsB,CAACD,CAAkB;AAAA,QAE5D,UAAA;AAAA,UAAA,gBAAAM,EAACI,GAAA,EACC,UAAA;AAAA,YAAA,gBAAAF,EAACG,KAAiB,YAAYX,GAAoB,OAAM,YAAW,SAAQ,2BAA0B;AAAA,YACrG,gBAAAM;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,gBACP,MAAK;AAAA,gBACL,UAAU,CAAC,MAAM;AACf,0BAAQ,IAAI,EAAE,cAAc,KAAK;AACjC,wBAAMY,IAAW9C,EAAU,OAAO,CAAC0C,MAAMA,EAAE,SAAS,EAAE,cAAc,KAAK;AACzE,kBAAAI,EAAS,CAAC,KAAK7C,EAAO,YAAY6C,EAAS,CAAC,CAAC,GAC7CrB,EAAmBxB,EAAO,YAAY;AAAA,gBACxC;AAAA,gBAEA,UAAA;AAAA,kBAAA,gBAAAmC,EAAC,UAAA,EAAO,OAAO,GAAG,UAAA,mBAAe;AAAA,kBAChCJ,EAAoB,IAAI,CAACC,MAEtB,gBAAAG,EAAC,YAAsB,OAAOH,EAAI,MAC/B,UAAAA,EAAI,QADMA,EAAI,IAEjB,CAEH;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,UACH,GACF;AAAA,UACCH,EAAiB,IAAI,CAACiB,wBAElBT,GAAA,EACC,UAAA;AAAA,YAAA,gBAAAF,EAACG,GAAA,EAAiB,YAAY,IAAO,OAAOtC,EAAO,UAAU8C,CAAW,EAAE,MAAM;AAAA,YAChF,gBAAAX;AAAA,cAACQ;AAAA,cAAA;AAAA,gBACC,OAAM;AAAA,gBACN,SAAS,CAACC,MAAO;AACf,kBAAAd,EAAoB9B,EAAO,aAAa,OAAO,CAACyC,MAAMA,MAAMK,CAAW,CAAC,GACxE9C,EAAO,eAAe8C,CAAW;AAAA,gBACnC;AAAA,cAAA;AAAA,YAAA;AAAA,UACF,EAAA,GARgBA,CASlB,CAEH;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,sBAEFT,GAAA,EACC,UAAA;AAAA,MAAA,gBAAAF,EAACG,GAAA,EAAiB,OAAM,aAAY,SAAQ,iCAAgC;AAAA,MAC5E,gBAAAH;AAAA,QAACQ;AAAA,QAAA;AAAA,UACC,SAAS,CAACC,MAAO;AACf,YAAI5C,EAAO,WACTA,EAAO,KAAA,GACPY,EAAW,EAAK,MAEhBZ,EAAO,IAAA,GACPY,EAAW,EAAI;AAAA,UAEnB;AAAA,UACA,OAAOD,IAAU,UAAU;AAAA,QAAA;AAAA,MAAA;AAAA,IAC7B,GACF;AAAA,sBACC0B,GAAA,EACC,UAAA;AAAA,MAAA,gBAAAF,EAACG,GAAA,EAAiB,OAAM,aAAY,SAAQ,0BAAyB;AAAA,MACrE,gBAAAH;AAAA,QAACQ;AAAA,QAAA;AAAA,UACC,SAAS,CAACC,MAAO;AACf,YAAI5C,EAAO,aACTA,EAAO,YAAY,IACnBc,EAAa,EAAK,MAElBd,EAAO,YAAY,IACnBc,EAAa,EAAI;AAAA,UAErB;AAAA,UACA,OAAOD,IAAY,SAAS;AAAA,QAAA;AAAA,MAAA;AAAA,IAC9B,GACF;AAAA,sBACCwB,GAAA,EACC,UAAA;AAAA,MAAA,gBAAAF,EAACG,GAAA,EAAiB,OAAM,SAAQ,SAAQ,mBAAkB;AAAA,wBACzDK,GAAA,EAAkB,SAAS3C,EAAO,OAAO,OAAO,QAAA,CAAS;AAAA,IAAA,EAAA,CAC5D;AAAA,EAAA,GACF;AAEJ;"}