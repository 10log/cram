{"version":3,"file":"events-Bi0MPQ2A.mjs","sources":["../src/compute/2d-fdtd/events.ts"],"sourcesContent":["import { on } from \"../../messenger\";\nimport { setSolverProperty, removeSolver, useSolver } from \"../../store\";\nimport type { FDTD_2D } from '../2d-fdtd/index';\n\ndeclare global {\n  interface EventTypes {\n    ADD_FDTD_2D: FDTD_2D | undefined,\n    REMOVE_FDTD_2D: string;\n    FDTD_2D_SET_PROPERTY: SetPropertyPayload<FDTD_2D>\n  }\n}\n\nexport default function registerFDTDEvents(){\n  on(\"FDTD_2D_SET_PROPERTY\", setSolverProperty);\n  on(\"REMOVE_FDTD_2D\", removeSolver);\n  on(\"ADD_FDTD_2D\", async (solver) => {\n    if (solver) {\n      useSolver.getState().set(draft => {\n        draft.solvers[solver.uuid] = solver;\n      });\n    } else {\n      // Create new FDTD_2D instance via dynamic import\n      const { FDTD_2D } = await import('../2d-fdtd/index');\n      const newSolver = new FDTD_2D();\n      useSolver.getState().set(draft => {\n        draft.solvers[newSolver.uuid] = newSolver;\n      });\n    }\n  });\n}\n"],"names":["registerFDTDEvents","on","setSolverProperty","removeSolver","solver","useSolver","draft","FDTD_2D","newSolver"],"mappings":";AAYA,SAAwBA,IAAoB;AAC1C,EAAAC,EAAG,wBAAwBC,CAAiB,GAC5CD,EAAG,kBAAkBE,CAAY,GACjCF,EAAG,eAAe,OAAOG,MAAW;AAClC,QAAIA;AACF,MAAAC,EAAU,SAAA,EAAW,IAAI,CAAAC,MAAS;AAChC,QAAAA,EAAM,QAAQF,EAAO,IAAI,IAAIA;AAAA,MAC/B,CAAC;AAAA,SACI;AAEL,YAAM,EAAE,SAAAG,EAAA,IAAY,MAAM,OAAO,sBAAkB,GAC7CC,IAAY,IAAID,EAAA;AACtB,MAAAF,EAAU,SAAA,EAAW,IAAI,CAAAC,MAAS;AAChC,QAAAA,EAAM,QAAQE,EAAU,IAAI,IAAIA;AAAA,MAClC,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;"}